import{r as a,B as se,j as e,L as ae}from"./index-CxiHBRSs.js";import{a as le}from"./users-DCcBluK9.js";import{p as ie}from"./user-CfaT0abE.js";import te from"./B2CView-BAcjjhmC.js";const oe=()=>{const[g,A]=a.useState([]),[m,o]=a.useState(1),[v,O]=a.useState(1),[y,D]=a.useState(!1),[P,F]=a.useState(!0),[E,L]=a.useState(!1),[Z,_]=a.useState(),[U,q]=a.useState(0),[d,$]=a.useState(""),[l,B]=a.useState(""),[i,T]=a.useState(""),[w,J]=a.useState(""),[t,R]=a.useState("all"),[n,W]=a.useState("all"),[c,I]=a.useState("all"),[r,Q]=a.useState("all");a.useEffect(()=>{h(m,d,l,i,t,n,c,r)},[m]);const h=async(s,u="",j="",b="",f="all",p="all",N="all",K="all")=>{try{D(!0);const V={page:s,...u&&{search:u},...j&&{startDate:j},...b&&{endDate:b},...f!=="all"&&{aadharVerified:f==="verified"},...p!=="all"&&{profileVerified:p==="verified"},...N!=="all"&&{appliedJobs:N==="applied"},...K!=="all"&&{currentEmployee:K==="current"}},x=await le(V);console.log(x,"response B2C Users"),x.success?(A(x.data),console.log(x.data),O(x.totalPages||1),q(x.total)):(console.error("Failed to fetch users:",x.message||"Unknown error"),se.error(x.message||"Error fetching users"))}catch(V){console.error("Error fetching B2C users:",V)}finally{D(!1)}},z=()=>{m>1&&o(s=>s-1)},H=()=>{m<v&&o(s=>s+1)},M=s=>{s.preventDefault(),o(1),$(w),h(1,w,l,i,t,n,c,r)},X=()=>{J(""),$(""),B(""),T(""),R("all"),W("all"),I("all"),Q("all"),o(1),h(1,"","","","all","all","all","all")},Y=()=>{o(1),h(1,d,l,i,t,n,c,r)},C=s=>{R(s),o(1),h(1,d,l,i,s,n,c,r)},k=s=>{W(s),o(1),h(1,d,l,i,t,s,c,r)},S=s=>{I(s),o(1),h(1,d,l,i,t,n,s,r)},G=s=>{Q(s),o(1),h(1,d,l,i,t,n,c,s)},ee=s=>{_(s),F(!1),L(!0)};return e.jsxs(e.Fragment,{children:[P&&!E&&e.jsx("div",{className:"page-wrapper",children:e.jsxs("div",{className:"content",children:[e.jsx("div",{children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h5",{className:"mb-0",children:"B2C Users List"}),(d||l||i||t!=="all"||n!=="all"||c!=="all"||r!=="all")&&e.jsxs("div",{className:"active-filters",children:[e.jsx("span",{className:"badge bg-light text-dark me-2",children:"Active Filters:"}),d&&e.jsxs("span",{className:"badge bg-info me-2",children:['Search: "',d,'"']}),l&&e.jsxs("span",{className:"badge bg-info me-2",children:["From: ",new Date(l).toLocaleDateString()]}),i&&e.jsxs("span",{className:"badge bg-info me-2",children:["To: ",new Date(i).toLocaleDateString()]}),t!=="all"&&e.jsxs("span",{className:"badge bg-info me-2",children:["Aadhar: ",t==="verified"?"Verified":"Not Verified"]}),n!=="all"&&e.jsxs("span",{className:"badge bg-info me-2",children:["Profile: ",n==="verified"?"Verified":"Not Verified"]}),c!=="all"&&e.jsxs("span",{className:"badge bg-info me-2",children:["Applications: ",c==="applied"?"Applied":"Not Applied"]}),r!=="all"&&e.jsxs("span",{className:"badge bg-info me-2",children:["Employee: ",r==="current"?"Current":"New"]}),e.jsxs("button",{className:"btn btn-sm btn-outline-danger",onClick:X,children:[e.jsx("i",{className:"fas fa-times me-1"}),"Clear All"]})]})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("form",{onSubmit:M,className:"d-flex",children:[e.jsx("input",{type:"text",className:"form-control me-2",placeholder:"Search by name, phone number, city...",value:w,onChange:s=>J(s.target.value)}),e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[e.jsx("i",{className:"fas fa-search me-1"}),"Search"]})]}),e.jsx("small",{className:"text-muted",children:"Search by name, phone number, father's name, or contact information"})]}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-5",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"startDate",className:"form-label small",children:"Registration From"}),e.jsx("input",{type:"date",id:"startDate",className:"form-control",value:l,onChange:s=>B(s.target.value)})]})}),e.jsx("div",{className:"col-md-5",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"endDate",className:"form-label small",children:"Registration To"}),e.jsx("input",{type:"date",id:"endDate",className:"form-control",value:i,onChange:s=>T(s.target.value)})]})}),e.jsx("div",{className:"col-md-2 d-flex align-items-end",children:e.jsx("button",{className:"btn btn-secondary w-100",onClick:Y,disabled:!l&&!i,children:e.jsx("i",{className:"fas fa-filter"})})})]})})]}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card bg-light",children:e.jsx("div",{className:"card-body py-2",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-md-3",children:e.jsx("span",{className:"fw-medium",children:"Aadhar Status:"})}),e.jsx("div",{className:"col-md-9",children:e.jsxs("div",{className:"btn-group",role:"group",children:[e.jsx("button",{type:"button",className:`btn ${t==="all"?"btn-primary":"btn-outline-primary"}`,onClick:()=>C("all"),children:"All Users"}),e.jsxs("button",{type:"button",className:`btn ${t==="verified"?"btn-primary":"btn-outline-primary"}`,onClick:()=>C("verified"),children:[e.jsx("i",{className:"fas fa-check-circle me-1"}),"Aadhar Verified"]}),e.jsxs("button",{type:"button",className:`btn ${t==="notVerified"?"btn-primary":"btn-outline-primary"}`,onClick:()=>C("notVerified"),children:[e.jsx("i",{className:"fas fa-times-circle me-1"}),"Aadhar Not Verified"]})]})})]})})})})}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card bg-light",children:e.jsx("div",{className:"card-body py-2",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-md-3",children:e.jsx("span",{className:"fw-medium",children:"Profile Status:"})}),e.jsx("div",{className:"col-md-9",children:e.jsxs("div",{className:"btn-group",role:"group",children:[e.jsx("button",{type:"button",className:`btn ${n==="all"?"btn-warning":"btn-outline-warning"}`,onClick:()=>k("all"),children:"All Users"}),e.jsxs("button",{type:"button",className:`btn ${n==="verified"?"btn-warning":"btn-outline-warning"}`,onClick:()=>k("verified"),children:[e.jsx("i",{className:"fas fa-user-check me-1"}),"Profile Verified"]}),e.jsxs("button",{type:"button",className:`btn ${n==="notVerified"?"btn-warning":"btn-outline-warning"}`,onClick:()=>k("notVerified"),children:[e.jsx("i",{className:"fas fa-user-times me-1"}),"Profile Not Verified"]})]})})]})})})})}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card bg-light",children:e.jsx("div",{className:"card-body py-2",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-md-3",children:e.jsx("span",{className:"fw-medium",children:"Application Status:"})}),e.jsx("div",{className:"col-md-9",children:e.jsxs("div",{className:"btn-group",role:"group",children:[e.jsx("button",{type:"button",className:`btn ${c==="all"?"btn-info":"btn-outline-info"}`,onClick:()=>S("all"),children:"All Users"}),e.jsxs("button",{type:"button",className:`btn ${c==="applied"?"btn-info":"btn-outline-info"}`,onClick:()=>S("applied"),children:[e.jsx("i",{className:"fas fa-paper-plane me-1"}),"Applied for Jobs"]}),e.jsxs("button",{type:"button",className:`btn ${c==="notApplied"?"btn-info":"btn-outline-info"}`,onClick:()=>S("notApplied"),children:[e.jsx("i",{className:"fas fa-user-clock me-1"}),"Not Applied"]})]})})]})})})})}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card bg-light",children:e.jsx("div",{className:"card-body py-2",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-md-3",children:e.jsx("span",{className:"fw-medium",children:"Employee Status:"})}),e.jsx("div",{className:"col-md-9",children:e.jsxs("div",{className:"btn-group",role:"group",children:[e.jsx("button",{type:"button",className:`btn ${r==="all"?"btn-success":"btn-outline-success"}`,onClick:()=>G("all"),children:"All Users"}),e.jsxs("button",{type:"button",className:`btn ${r==="current"?"btn-success":"btn-outline-success"}`,onClick:()=>G("current"),children:[e.jsx("i",{className:"fas fa-briefcase me-1"}),"Current Employee"]})]})})]})})})})})]})})})}),e.jsxs("div",{className:"row mt-3",children:[e.jsxs("h4",{style:{textAlign:"center",fontWeight:"800",paddingTop:10,paddingBottom:25},children:["Total Count - ",U]}),y?e.jsxs("div",{className:"text-center my-4",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-2",children:"Loading users..."})]}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table border-0 custom-table comman-table datatable mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Photo"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Location"}),e.jsx("th",{children:"Phone Number"}),e.jsx("th",{children:"Registration Date"}),e.jsx("th",{children:"Aadhar Verified"}),e.jsx("th",{children:"Profile Verified"}),e.jsx("th",{children:"Current Employee"}),e.jsx("th",{children:"Applied Jobs"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:g.length>0?g.map((s,u)=>{var j,b,f,p,N;return e.jsxs("tr",{children:[e.jsx("td",{children:(m-1)*20+u+1}),e.jsx("td",{children:e.jsx("img",{src:(s==null?void 0:s.profile)||ie,alt:"",height:50,width:50,style:{borderRadius:"50%",objectFit:"cover"}})}),e.jsx("td",{children:e.jsx("div",{className:"d-flex flex-column",children:e.jsx("span",{className:"fw-bold text-dark",children:((j=s==null?void 0:s.basicDetails)==null?void 0:j.name)||"-"})})}),e.jsx("td",{style:{width:"200px",wordWrap:"break-word",overflowWrap:"break-word",whiteSpace:"normal"},children:((b=s==null?void 0:s.basicDetails)==null?void 0:b.city)&&e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-map-marker-alt me-1"}),s.basicDetails.city,((p=(f=s==null?void 0:s.workPreference)==null?void 0:f.jobLocation)==null?void 0:p.length)>0&&`, ${s.workPreference.jobLocation.join(", ")}`]})}),e.jsx("td",{children:s.phoneNumber||"-"}),e.jsx("td",{children:s.createdAt?new Date(s.createdAt).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}):"-"}),e.jsx("td",{children:s!=null&&s.isAadharphotoVerified&&(s!=null&&s.isDocumentVerified)||s!=null&&s.isAadharOtpVerfied?e.jsxs("span",{className:"badge bg-success",children:[e.jsx("i",{className:"fas fa-check-circle me-1"})," Verified"]}):e.jsxs("span",{className:"badge bg-warning",children:[e.jsx("i",{className:"fas fa-times-circle me-1"})," Not Verified"]})}),e.jsx("td",{children:s!=null&&s.isPhotoVerified?e.jsxs("span",{className:"badge bg-success",children:[e.jsx("i",{className:"fas fa-check-circle me-1"})," Verified"]}):e.jsxs("span",{className:"badge bg-warning",children:[e.jsx("i",{className:"fas fa-times-circle me-1"})," Not Verified"]})}),e.jsx("td",{children:s!=null&&s.isCurrentEmployee?e.jsxs("span",{className:"badge bg-success",children:[e.jsx("i",{className:"fas fa-check-circle me-1"})," Current Employee"]}):e.jsxs("span",{className:"badge bg-warning",children:[e.jsx("i",{className:"fas fa-times-circle me-1"})," New Employee"]})}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-info",children:((N=s==null?void 0:s.appliedJobs)==null?void 0:N.length)||0})}),e.jsx("td",{onClick:()=>ee(s),children:e.jsxs(ae,{state:{user:s},className:"btn btn-sm btn-primary",children:[e.jsx("i",{className:"fas fa-eye me-1"})," View"]})})]},s._id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"text-center",children:e.jsxs("div",{className:"py-4",children:[e.jsx("i",{className:"fas fa-user-slash fa-3x text-muted mb-3"}),e.jsx("h5",{className:"text-muted",children:"No users found"}),(d||l||i||t!=="all"||n!=="all"||c!=="all"||r!=="all")&&e.jsx("p",{children:"Try adjusting your search criteria or clear filters"})]})})})})]})})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[e.jsxs("button",{className:"btn btn-secondary",onClick:z,disabled:m===1||y,children:[e.jsx("i",{className:"fas fa-chevron-left me-1"})," Previous"]}),e.jsxs("div",{className:"pagination-info",children:[e.jsxs("span",{className:"fw-bold",children:["Page ",m," of ",v]}),e.jsxs("div",{className:"text-muted small",children:["Showing ",g.length," of ",U," users"]})]}),e.jsxs("button",{className:"btn btn-secondary",onClick:H,disabled:m>=v||y,children:["Next ",e.jsx("i",{className:"fas fa-chevron-right ms-1"})]})]})]})}),E&&!P&&e.jsx(te,{user:Z,setListPage:F,setViewPage:L,users:g,setUsers:A})]})};export{oe as default};
